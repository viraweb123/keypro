<!DOCTYPE html >
<html lang="fa" dir="rtl" >

    <head>

        <!-- TODO Define Meta Datas -->
        <noscript>
            <meta http-equiv="refresh" content="1; URL=not.support.js.html">
        </noscript>
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <link rel="SHORTCUT ICON"       href="static/img/favicon.ico" />
        <meta name="viewport"           content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="keywords"           content="مدیریت اسناد,solutions,management,document,enterprise,electronic data management system,electronic,data,management,system,enterprise document management solutions,سامانه مدیریت اسناد الکترونیکی,سامانه مدیریت اسناد,company,EDMS,شرکت,شرکت دانش هم آرا,دانش هم آرا" />
        <meta name="description"        content="سایت مدیریت اسناد و اطلاعات جهت سهولت استفاده" />
        <!-- TODO Define WebSite Title -->
        <title >KeydocPro</title>
        <!-- TODO Define external liberary -->
        <script type="text/javascript">

                var randomVersionName = Math.floor(Math.random() * 10000);

                //window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')

                /*todo CSS(cascade style sheet) loading not caching */
                document.write('<link type="text/css"  href="resource/styleSheet/bootstrap.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/ui-bootstrap-csp.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/bootstrap-rtl.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/toaster.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/carousel-3d.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/ng-img-crop.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/splitter.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/angular-material.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="static/css/font-awesome.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/materialize.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="static/js/Datepicker/persianDatePicker-default.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="resource/styleSheet/jquery-ui.min.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="static/css/public.css?dev=' + randomVersionName + '" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="ecma5/Directive/Treeview/angularTreeview.css" rel="stylesheet" \/>');
                document.write('<link type="text/css"  href="ecma5/Directive/TOCview/angularTOCView.css" rel="stylesheet" \/>');

                /*todo JS(java script) loading not caching */
                document.write('<script type="text/javascript" async="async" src="static/js/baseGENERATOR.js?dev=' + randomVersionName + '"\><\/script>');
                document.write('<script type="text/javascript" async="async" src="ecma5/ExternalLiberary/Intelligent/jsLoad.js"><\/script>');
                document.write('<script type="text/javascript" async="async" src="ecma5/ExternalLiberary/Intelligent/cssLoad.js"><\/script>');
                document.write('<script type="text/javascript" async="async" src="ecma5/ExternalLiberary/Intelligent/featuresLoad.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/system.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/jquery.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/jquery-ui.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/jquery.nicescroll.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-route.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-ui-router.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-ui/event.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-ui/keypress.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-sanitize.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-animate.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/ui-bootstrap-tpls.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/bootstrap.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-aria.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-messages.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-material.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/lodash.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/restangular.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/toaster.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-translate.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/moment.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/moment-jalaali.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/persianDatePicker.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/accordion.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/persiandate.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/persian-datepicker-tpls.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/persian.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angularpersian.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angularjs-dropdown-multiselect.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/ng-img-crop.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/splitter.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/materialize.min.js"><\/script>');
                document.write('<script type="text/javascript" src="static/js/Datepicker/persianDatePicker.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-file-upload.min.js"><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/angular-drag-and-drop-lists.min.js"><\/script>');
                document.write('<script type="text/javascript" src="static/pdfDirectiveViewer/web/test.js?dev=' + randomVersionName + '"\><\/script>');
                document.write('<script type="text/javascript" src="ecma5/Class/cashManagement.js?dev=' + randomVersionName + '"\><\/script>');
                document.write('<script type="text/javascript" src="ecma5/ExternalLiberary/Public/localStorageManagement.js?dev=' + randomVersionName + '"\><\/script>');
                document.write('<script type="text/javascript" src="resource/javaScript/runtime.js"><\/script>');
                document.write('<script type="text/javascript" src="config.js?dev=' + randomVersionName + '"\><\/script>');




                /*document.write('<script type="text/javascript" src="ecma5/Modules/Administration/Center/userController.js?dev=' + randomVersionName + '"\><\/script>');*/



        </script>
        <!-- TODO Config Website before Start -->
        <script type="text/javascript">

                    var protectedUpdateMessage = -1;
                    window.timeoutList = new Array();
                    window.intervalList = new Array();
                    window.oldSetTimeout = window.setTimeout;
                    window.oldSetInterval = window.setInterval;
                    window.oldClearTimeout = window.clearTimeout;
                    window.oldClearInterval = window.clearInterval;
                    window.setTimeout = function(code, delay) {
                        var retval = window.oldSetTimeout(code, delay);
                        window.timeoutList.push(retval);
                        return retval;
                    };
                    window.clearTimeout = function(id) {
                        var ind = window.timeoutList.indexOf(id);
                        if(ind >= 0) {
                            window.timeoutList.splice(ind, 1);
                        }
                        var retval = window.oldClearTimeout(id);
                        return retval;
                    };
                    window.setInterval = function(code, delay) {
                        var retval = window.oldSetInterval(code, delay);
                        window.intervalList.push(retval);
                        return retval;
                    };
                    window.clearInterval = function(id) {
                        var ind = window.intervalList.indexOf(id);
                        if(ind >= 0) {
                            window.intervalList.splice(ind, 1);
                        }
                        var retval = window.oldClearInterval(id);
                        return retval;
                    };
                    /*
                    var xs = new Date();//t type="text/javascript" src="resource/javaScript/lodash.min.js"><\/script>');
                    var isRequestWithAnimationCompanyNameInsidingServer =
                    'D'.charCodeAt() +
                    'h'.charCodeAt()+
                    'a'.charCodeAt() +
                    'm'.charCodeAt()+
                    'a'.charCodeAt()+
                    'r'.charCodeAt()+
                    'a'.charCodeAt() +
                    'k'.charCodeAt() +'e'.charCodeAt()+'y'.charCodeAt()+'d'.charCodeAt()+
                    'o'.charCodeAt()+'c'.charCodeAt() + 'p'.charCodeAt() +
                    'r'.charCodeAt()+'m'.charCodeAt() + 'e'.charCodeAt()+'d'.charCodeAt()+
                    'm'.charCodeAt() + '0'.charCodeAt();
                    var isReadyGettingFromServer = xs.getFullYear()>=isRequestWithAnimationCompanyNameInsidingServer && xs.getMonth()>=2;
                    */
                    window.clearAllTimeouts = function() {
                        for(var i in window.timeoutList) {
                            if(window.timeoutList[i] != protectedUpdateMessage)
                                window.oldClearTimeout(window.timeoutList[i]);
                        }
                        _.remove(window.timeoutList,function(id){return id != protectedUpdateMessage});
                        //window.timeoutList = new Array();
                    };
                    window.clearAllIntervals = function() {
                        for(var i in window.intervalList) {
                            window.oldClearInterval(window.intervalList[i]);
                        }
                        window.intervalList = new Array();
                    };

                    var webAppTypingFormat = null;

                    function successGetUserName(userName,result){
                        try{

                            console.log("------------COOKIE-----------------");
                            console.log(result);

                            var encode = _encodeBase(userName+":"+result);

                            console.log("------------ENCODE-----------------");
                            console.log(encode);

                            $.ajax({
                                url: "/KeydocPro/services/rest/auth/login",
                                type: "POST",
                                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                                transformRequest: function(obj) {
                                    var str = [];
                                    for(var p in obj)
                                        str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
                                    return str.join("&");
                                },
                                data: {authId:encode},
                                //jsonp : false,
                                jsonpCallback: 'jsonCallback',
                                dataType: "json",
                                cache: 'false',
                                success : function(data){
                                    createCookiesWithNameFunction( 'Authorization',"Basic"+encode ).then(
                                        function(success){
                                            System.import('ecma5/externalApp').then(null, console.error.bind(console));
                                        },
                                        function(err){
                                            console.error(err);
                                        }
                                    );
                                },
                                error : function(error){
                                    console.error((error || error.message));
                                }
                            });
                        }catch(e){
                            console.error(e);
                        }
                    }
                    function startLoadingWebAPP() {
                        try{
                            var request = new XMLHttpRequest();
                            request.open("GET", "static/config/webApp.json");



                            request.onreadystatechange = function () {
                                if (request.readyState == 4) {


                                    var res = JSON.parse(request.responseText);
                                    try{
                                        /*todo save to webApp*/
                                         // "redirect" : "function redirect(returnAddress){return \"http://sso.metro.com/?ReturnAddress=\"+returnAddress;}"
                                        try{
                                            res.redirect = eval("("+res.redirect+")");
                                        } catch(er){
                                            window.location = 'problem.html';
                                        }
                                        switch(res.type){
                                            case "standard":
                                                webAppTypingFormat = {type : 'standard'};
                                                System.import('ecma5/standardApp').then(null, console.error.bind(console));
                                                break;
                                            case "withSso":
                                                var result = "PASS";//isCookieFunction(res.SsoTokenName);
                                                $.ajax({
                                                    url: res.getUserFromToken + "/" + result,
                                                    type: "GET",
                                                    //jsonp : false,
                                                    jsonpCallback: 'jsonCallback',
                                                    dataType: "json",
                                                    cache: 'false',
                                                    success: function (data) {
                                                        webAppTypingFormat = res;
                                                        successGetUserName(data.username, result);
                                                        console.log(data);
                                                    },
                                                    error: function (error) {
                                                        console.error("error occur in response");
                                                        window.location  = res.redirect(window.location.href);
                                                    }
                                                });
                                                break;
                                            default:
                                                throw new Error("not type exist");
                                                break;
                                        }
                                    }catch(e){
                                        window.location = 'problem.html';
                                    }
                                }
                            }
                            request.send();
                        }catch(e){
                            console.error(e);
                        }
                    }
                    startLoadingWebAPP();
        </script>
        <style>
                /*.modal-open .modal{
                    overflow-y: hidden !important;
                }*/
                .modal{
                    background-color: transparent !important;
                    max-height: 100% !important;
                    box-shadow: none !important;

                }
        </style>
        <!-- TODO Config Modal in website -->
        <script type="text/ng-template" id="login.html">


                            <style>
                                .modal-header{
                                    /*background-color: #5D9CEC !important;*/
                                    background-color: rgba(230, 230, 230, 0.3) !important;
                                    color: white !important;
                                    border-top-left-radius: 10px !important;
                                    border-top-right-radius: 10px !important;
                                    /*margin: -15px 0px 0px 0px !important;*/
                                    margin: -8px 0px 0px 0px !important;

                                }

                                .modal-footer{
                                    padding: 0px!important;
                                    margin: 0px !important;
                                }

                                .modal-footer #okButon{
                                    border-radius: 0px ! important;
                                    transition-duration: 0.5s;
                                    transition-property: background-color,color;
                                    transition-timing-function: ease-in;
                                }

                                .modal-footer #okButon:hover{
                                    box-shadow  :  0 0 10px #E75753;
                                    background-color :#E75753;
                                    color : white;
                                }

                                .modal-footer #okButon md-icon{
                                    padding-left: 11px !important;
                                    border-left: 1px solid #E75753;
                                }

                                .modal-footer #okButon:hover md-icon{
                                    color : white;
                                    border-left: 1px solid white !important;
                                }

                                .modal-footer  section md-button{
                                    padding-left  : 0px !important;
                                    padding-right : 0px !important;
                                }

                                .modal-footer  section md-button md-icon{
                                    border-left: 1px solid rgb(197, 197, 197);
                                    padding-right: 0px  !important;
                                    padding-left: 6px  !important;
                                }

                                .loginPage .captchSection .captchIsError{
                                    border: 1px solid #E75753 !important;
                                    box-shadow  :  0 0 5px #E75753 !important;
                                }

                                .loginPage .captchSection .captchIsTouched{
                                    border: 1px solid rgba(35,173,255,1) !important;
                                    box-shadow  :  0 0 5px rgba(35,173,255,1) !important;
                                }
                                .loginPage .captchSection .captchDefault{
                                    border: 1px solid rgba(197,197,197,1);
                                }

                                .loginPage canvas{
                                    box-shadow : 0 0 5px rgba(35,173,255,1) !important;
                                    border: 1px solid rgba(35,173,255,1) !important;
                                    direction: ltr !important;
                                    text-align: left !important;
                                }

                            </style>

                            <div class="modal-header" style="padding: 2px;">
                                <md-content  style="background-color: transparent; padding-right: 0px; padding-left: 0px; margin-right: 0px; margin-left: 0px; margin-top: 0px ! important; padding-bottom: 0px ! important; margin-bottom: 0px ! important; padding-top: 0px ! important;" layout-padding class="row form-group"  id="loginFormContent" style="background-color:transparent;">
                                    <div class="row form-group">
                                        <div class="col-sm-1 pull-left" style="margin-top: 20px;">
                                            <i class="fa fa-remove"  data-placement="top"   data-toggle="tooltip"  style="cursor: pointer;margin-right: 15px;margin-top: 16px;margin-top: 16px;"  ng-click="func.cancel()">
                                                <md-tooltip  md-direction="bottom"  style="z-index:100000;">
                                                    بازگشت به صفحه ورود
                                                </md-tooltip>
                                            </i>
                                        </div>
                                        <div class="col-sm-11 pull-right  userLogo">
                                                            <!--<span  class="fa fa-user  userLoginIcon"  style="right: 50%; position: relative;">
                                                                <md-tooltip  md-direction="bottom"  style="z-index:10;">
                                                    ورود به سیستم
                                                                </md-tooltip>
                                                             </span>-->
                                                            <img src="static/logo/mainlogo.ico" style="width: auto; margin-right: calc(55% - 25px); height: 90px; max-width: 90px;" />
                                                            <!--<img src="static/image/user.png" style="width:50px;height: 50px;border-radius: 25px;margin-right: calc(55% - 25px);" />-->
                                                            <md-tooltip  md-direction="bottom"  style="z-index:10;">
                                                                ورود به سیستم
                                                            </md-tooltip>
                                        </div>
                                    </div>
                                </md-content>
                            </div>

                            <div class="loginPage modal-body" style="direction: rtl;height: 260px; "><!--width: 597px ! important; height: 376px;-->
                                <div class="row form-group loginFormMainDiv"  style="margin-bottom:5px !important; margin-top: 0 !important;">
                                    <md-content layout-padding class="row form-group"  id="loginFormContent" style="background-color:transparent;">

                                        <form name="loginForm"  class="row" novalidate role="form">

                                            <div class="col-sm-12 row" style="height: 80px;margin-top: 0 !important;">
                                                <div class="col-sm-1"></div>
                                                <div layout="row"  class="col-sm-10"  style="margin-right: 10px;">
                                                    <input type="text"  style="display:none" />
                                                    <md-input-container style="font-size: 25px;margin-top: 0 !important;" class="md-block md-icon-float col-sm-12 col-xs-12">
                                                        <label>نام کاربری</label>
                                                        <md-icon  md-font-icon="fa fa-user"></md-icon>
                                                        <input
                                                                style="text-align: left; padding-left: 10px;direction: ltr;"
                                                                id="txtUsername"
                                                                required
                                                                tabindex="1"
                                                                focus-me="true"
                                                                type="text"
                                                                name="txtUsername"
                                                                ng-model="data.txtUsername"
                                                                minlength="2"
                                                                maxlength="100"
                                                                ng-keyup="func.checkCaptch()"
                                                                ui-keypress="{13:'func.checkTrue($event)'}"
                                                        />
                                                        <div ng-messages="loginForm.txtUsername.$error" role="alert">
                                                            <div ng-message="required">
                                                                لطفا یک نام کاربری وارد کنید
                                                            </div>
                                                            <div ng-message="minlength">
                                                                نام کاربری حداقل باید ۲ کاراکتر داشته باشد
                                                            </div>
                                                            <div ng-message="minlength">
                                                                نام کاربری نباید بیش از ۱۰۰ کاراکتر داشته باشد
                                                            </div>
                                                        </div>
                                                    </md-input-container>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 row"  style="height: 80px;margin-bottom:5px !important;margin-top: 0 !important;">
                                                <div class="col-sm-1"></div>
                                                <div layout="row" class="col-sm-10"  style="margin-right: 10px;">
                                                    <input type="password"  style="display:none" />
                                                    <md-input-container class="md-block md-icon-float col-sm-12 col-xs-12">
                                                        <label>کلمه عبور</label>
                                                        <md-icon style="font-size: 25px;" md-font-icon="fa fa-key"></md-icon>
                                                        <input
                                                                style="text-align: left; padding-left: 10px;direction: ltr;"
                                                                id="txtPassword"
                                                                required
                                                                tabindex="2"
                                                                type="password"
                                                                name="txtPassword"
                                                                ng-model="data.txtPassword"
                                                                minlength="2"
                                                                maxlength="100"
                                                                ui-keypress="{13:'func.checkTrue($event)'}"
                                                        />
                                                        <div ng-messages="loginForm.txtPassword.$error" role="alert">
                                                            <div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
                                                                لطفا یک کلمه عبور وارد کنید
                                                            </div>
                                                            <div ng-message="required">
                                                                لطفا یک کلمه عبور وارد کنید
                                                            </div>
                                                            <div ng-message="minlength">
                                                                کلمه عبور حداقل باید ۲ کاراکتر داشته باشد
                                                            </div>
                                                            <div ng-message="minlength">
                                                                کلمه عبور نباید بیش از ۱۰۰ کاراکتر داشته باشد
                                                            </div>
                                                        </div>
                                                    </md-input-container>
                                                </div>
                                            </div>




                                        </form>
                                    </md-content>
                                </div>
                            </div>

                            <div class="modal-footer row">
                                <div class="row" style="margin-top: 5px ! important;">

                                    <form name="deleteFolderForm" novalidate role="form">

                                        <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
                                            <md-button id="okButon"  tabindex="4"   class="md-raised" ng-click="func.checkTrue()">
                                                <md-icon  md-font-icon="fa fa-user  fa-fw"></md-icon>
                                                <span style="margin-right: 3px;"  >ورود</span>
                                                <md-tooltip  md-direction="top"  style="z-index:100000;">
                                                    ورود به سیستم
                                                </md-tooltip>
                                            </md-button>

                                        </section>
                                    </form>
                                </div>
                            </div>
            </script>

    </head>

    <body style="overflow: hidden;">

        <style>
            .not-show-waiting{
                display       : none;
                visibility    : hidden;
            }
            .show-waiting{
                display       : inline !important;
                visibility    :visible !important;
            }
            .site-body{
                padding-right:0px !important;
                padding-left:0px !important;
            }
            .waiting-dialog-box{
                z-index: 100;
                background: rgba(255, 255, 255, 1) none repeat scroll 0% 0%;
                /*border-radius: 0px 0px 5px 5px;*/
                top: 0px !important;
                text-align: center;
                padding: 15px 10px;
                position: absolute  !important;
                margin-right: calc(50vw - 125px);
                width: 340px;
                height:86px;
                z-index : 10000000;
                border-right : 1px solid;
                border-bottom: 1px solid;
                border-left: 1px solid;
            }
            .waiting-dialog-box  .progress{
                margin-top: 10px;
                padding: 0px;
                height: 13px  !important;
                margin-bottom: 10px !important;
                margin-right: 10%;
                width: 80%;
            }
            .waiting-dialog-box  .progress   .progress-bar{
                width: 100% !important;

            }
            #main-page{
                height: 100vh;
                width: 100vw;
                margin: 0px !important;
                padding: 0px !important;
                overflow: hidden !important;
            }
        </style>
        <!-- TODO waiting show dialog box -->
        <div  class="loading-dialog not-show-waiting waiting-dialog-box"  id="show-waiting-get-rest-from-server-id">
            <div >
                <span  style="font-family: IRNazanin; font-size: 20px;">در حال دریافت اطلاعات ...</span>
            </div>
            <div class="progress progress-bar-warning progress-striped active">
                <div
                        class="progress-bar"
                        role="progressbar"
                        aria-valuenow="45"
                        aria-valuemin="0"
                        aria-valuemax="100">
                </div>
            </div>
        </div>
        <!-- TODO show toasters -->
        <toaster-container
                toaster-options="{
                     'time-out': 3000,
                     'position-class': 'toast-bottom-right',
                     'limit':5,
                     'showEasing': 'swing',
                     'hideEasing': 'linear',
                     'showMethod': 'fadeIn',
                     'hideMethod': 'fadeOut'
                 }">
        </toaster-container>
        <!-- TODO Show main page state -->
        <div class="Main" ui-view></div>

    </body>

</html>